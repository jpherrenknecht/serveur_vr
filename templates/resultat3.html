<html>
    <head>
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
        />

        <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
        <script src="https://api.windy.com/assets/map-forecast/libBoot.js"></script>

    </head>


    <script>
            var latdep={{  result['lat'] }}
            var lngdep={{  result['lng'] }}
        
        function initialize() {
            
            document.formu.lat.value=latdep
            document.formu.lng.value=lngdep
           
        }
    </script>   
        <script>

const options = {
    // Required: API key
   // key: 'PsLAtXpsPTZexBwUkO7Mx5I', // REPLACE WITH YOUR KEY !!!
    key: 'ydO74Xuxv2WWOEShDpel1kaiae8zCnLO',
    // Put additional console output
    //verbose: true,

    // Optional: Initial state of the map
    lat: 45,
    lon: 1,
    zoom: 8,
};

// Initialize Windy API
windyInit(options, windyAPI => {
    // windyAPI is ready, and contain 'map', 'store',
    // 'picker' and other usefull stuff
    const { map } = windyAPI;
    const { store } = windyAPI;
    const { picker } = windyAPI;
    // .map is instance of Leaflet map
    //var map = L.map('map').setView([51.505, -0.09], 13);
    L.popup()
        .setLatLng([50.4, 0])
        .setContent('Hello World +154');
    
    var polylinePoints=[[[47,2],[47,3],[46.5,3.2],[48.5,3.52]],[[46,2],[46,3],[45.5,3.8],[49.5,3.52]]];
   
    L.polyline(polylinePoints).setStyle({
    color: 'black',
    weight:1,
    }).addTo(map);
    
    polylineRed={{  polyline }}
    L.polyline(polylineRed).setStyle({
    color: 'red',
    weight:1,
    }).addTo(map);


    L.marker([51.5, -0.09]).addTo(map);
   
    var depart = L.marker([latdep,lngdep], {
       
        title: "Depart"
      }).addTo(map);

      depart.bindPopup("<b>Depart</b><br> Latitude : " + latdep + '<br>Longitude : ' +lngdep).openPopup();

      var greenIcon = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

L.marker([45, -0.09], {icon: greenIcon}).addTo(map);


var redIcon = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});




L.marker([46, -5], {icon: redIcon}).addTo(map);
    //L.marker([latdep,lngdep]).addTo(map)

});


 
        </script>


       
        <style>
            #windy {
                width: 100%;
                height: 90%;
            }
        </style>
    </head>
  
    


    <body onload="initialize()">
        <div text-align='right'>
            <form action="http://localhost:8080/resultat3" method="post" name='formu'>

               <label><b>Depart</b></label> Latitude</label> :
                            <input type="text" name="lat"  value = "" />
                <label>Longitude</label> :
                            <input type="text" name="lng"  value="" />
                            <br>

                <label><b>Arrivee</b></label> Latitude</label> : 
                            <input type="text" name="lata" />
                <label>Longitude</label> : 
                            <input type="text" name="lnga" />             
                            <input type="submit" value="Ok" />
            </form>
        </div>
        
        <div id="windy"></div>


        
    </body>
</html>